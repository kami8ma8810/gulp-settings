<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>gulp4構築</title>
  <link rel="stylesheet" href="dist/css/style.css">
  <!-- Polyfill for IntersectionObserver -->
  <script src="dist/js/intersection-observer.js"></script>
</head>

<body>
  <header>
    <h1>初心者のためのgulp4</h1>
    <h2>この記事を読むのに向いている人</h2>
    <p>テストテスト</p>
  </header>
  <main>
    <article>
      <h2>別ディレクトリへの導入方法</h2>
      <ol>
        <li>「gulpfile.js」と「package.json」をコピペ</li>
        <li>移動先のフォルダでコマンド「npm i」を叩く</li>
      </ol>
      <p>※コマンド「npm i」を打つ前にpackage.jsonの中身をいじるとエラーになったり上手くインストールされないので注意。</p>
    </article>
    <a class="site"
      href="https://medium.com/elegant-seagulls/parallax-and-scroll-triggered-animations-with-the-intersection-observer-api-and-gsap3-53b58c80b2fa"
      target="_blank">参考文献</a>
    <section>SCROLL DOWN</section>
    <section>
      <div class="js-trigger">
        <div class="js-fadein"></div>
        <div class="js-fadein"></div>
        <div class="js-fadein"></div>
      </div>
    </section>
    <section>
      <div class="js-trigger">
        <div class="js-fadein"></div>
      </div>
    </section>
    <section>
      <div class="js-trigger">
        <div class="js-fadein"></div>
      </div>
    </section>
    <section>
      <div class="js-trigger">
        <div class="js-fadein"></div>
        <div class="js-fadein"></div>
        <div class="js-fadein"></div>
        <div class="js-fadein"></div>
        <div class="js-fadein"></div>
      </div>
    </section>
    <section>
      <div class="js-trigger">
        <div class="js-fadein"></div>
        <div class="js-fadein"></div>
      </div>
    </section>
  </main>
  <footer>
    <p><small>&copy;2020 Hayato Kamiyama</small></p>
  </footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
  <!-- <script src="https://polyfill.io/v2/polyfill.min.js?features=IntersectionObserver"></script> -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const options = {
        root: null,
        rootMargin: '-50% 0px',
      };

      const observerElements = document.querySelectorAll('.js-trigger');

      const observerFunc = new IntersectionObserver(
        (entries) => {
          entries.forEach(entry => {
            const targetElement = entry.target.querySelectorAll('.js-fadein')

            if (entry.isIntersecting) {
              gsap.fromTo(targetElement, {
                y: 50
              }, {
                duration: 1,
                rotation: '-360deg',
                autoAlpha: 1,
                y: 0,
                stagger: .2
              })
              observerFunc.unobserve(entry.target);
            }
          });
        },
        options
      );

      observerElements.forEach(el => {
        observerFunc.observe(el);
      });
    }, false);

  </script>
</body>

</html>
